<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/homepage_header :: homepage_header"></head>

<body>
    <div th:replace="fragments/homepage_tagmanager :: homepage_tagmanager"></div>

    <div class="wrap">
        <div class="layout-wrap">
            <div class="container">
                <div th:replace="fragments/homepage_gnb :: homepage_gnb"></div>

                <main class="contents main-contents">
                    <!-- 메인 교육과정 슬라이드 -->
                    <div class="main-slide-wrap">
                        <div class="main-slide">
                            <div class="item">
                                <a href="#">
                                    <img src="https://itcampus.hankyung.com/media/MD_20240614103006669_backend_03_800x800-001.png" alt="파워있는 마케터가 되는 데이터 분석 기반 디지털 마케팅">
                                </a>
                            </div>
                            <div class="item">
                                <a href="#">
                                    <img src="https://itcampus.hankyung.com/media/MD_20240614102951491_digital_mkt.png" alt="Back-End 교육을 시작합니다">
                                </a>
                            </div>
                        </div>
                        <div class="main-slide-paging">
                            <span class="num curr"></span>
                            <span class="slide-bar">
                                <div class="progress"></div>
                            </span>
                            <span class="num total"></span>
                        </div>
                    </div>
                    <!-- 교육과정 목록 -->
                     <div class="course-list">
                    	<th:block th:each="item:${clist}">
	                        <div class="course-item">
	                            <a th:href="@{/course/detail(cid=${item.cid})}" class="link-block">
	                                <div class="thumb">
<!-- 	                                    <img src="https://itcampus.hankyung.com/wp-content/uploads/mangboard/2023/11/07/F138_cdi4e1al_small.png" alt="엔터테인먼트 영상기획/제작 과정 1기"> --> 	                                
	                                	<img th:src="${#strings.substring(item.cthumb,#strings.indexOf(item.cthumb,'/file'))}" th:alt="${item.cname}">
	                                </div>
	                                <th:block th:if="${#strings.indexOf(item.ccate,'KDT') != -1}">
                                		<div class="category">K디지털트레이닝</div>                                
                                	</th:block>
                                	 <th:block th:unless="${#strings.indexOf(item.ccate,'KDT') != -1}">
	                                	<div class="category">국가기간전략산업직종</div>                                
	                                </th:block>
	                                <div class="txt-cont">
	                                    <div class="course-tit" th:text="${item.cname}"></div>
	                                    <div class="date" 
	                                    th:text="${#strings.replace(item.csdate,'-','.')} + ' ~ ' + ${#strings.replace(item.cedate,'-','.')}">
	                                    </div>
	                                    <div class="btns">
	                                        <div class="btn-more">자세히보기</div>
	                                    </div>
	                                </div>
<!-- 	                                <div th:class="'status-badge ' + (${#temporals.format(item.csdate,'yyyy-MM-dd' ) > #dates.format(#dates.createToday(),'yyyy-MM-dd') ? 'end' : 'ing'})"> -->
	                                    <div class="status-badge ing" >
	                                    [[${#strings.substring(#strings.replace(item.csdate,'-','.'),2)}]]<br>
                                    	개강<span style="display: none;">[[${item.csdate}]]</span>
	                                </div>
	                            </a>
	                        </div>
                        </th:block>
<!--                         <div class="course-item"> -->
<!--                             <a href="#" class="link-block"> -->
<!--                                 <div class="thumb"> -->
<!--                                     <img src="https://itcampus.hankyung.com/wp-content/uploads/mangboard/2023/11/07/F138_cdi4e1al_small.png" alt="[4차/모집중] PBL기반 자바/스프링 백엔드 과정"> -->
<!--                                 </div> -->
<!--                                 <div class="category">K디지털트레이닝</div> -->
<!--                                 <div class="txt-cont"> -->
<!--                                     <div class="course-tit"> -->
<!--                                         [4차/모집중] PBL기반 자바/스프링 백엔드 과정 -->
<!--                                     </div> -->
<!--                                     <div class="date"> -->
<!--                                         2024-05-13 ~ 2024-07-26 -->
<!--                                     </div> -->
<!--                                     <div class="btns"> -->
<!--                                         <div class="btn-more">자세히보기</div> -->
<!--                                     </div> -->
<!--                                 </div> -->
<!--                                 <div class="status-badge ing"> -->
<!--                                     24.03.20<br> -->
<!--                                     개강 -->
<!--                                 </div> -->
<!--                             </a> -->
<!--                         </div> -->
<!--                         <div class="course-item"> -->
<!--                             <a href="#" class="link-block"> -->
<!--                                 <div class="thumb"> -->
<!--                                     <img src="https://itcampus.hankyung.com/wp-content/uploads/mangboard/2023/08/24/F130_ai_rpa_small.png" alt="[모집완료] AI와 RPA기반 웹서비스 자동화 개발과정"> -->
<!--                                 </div> -->
<!--                                 <div class="category">K디지털트레이닝</div> -->
<!--                                 <div class="txt-cont"> -->
<!--                                     <div class="course-tit"> -->
<!--                                         [모집완료] AI와 RPA기반 웹서비스 자동화 개발과정 -->
<!--                                     </div> -->
<!--                                     <div class="date"> -->
<!--                                         2023-09-25 ~ 2024-03-20 -->
<!--                                     </div> -->
<!--                                     <div class="btns"> -->
<!--                                         <div class="btn-more">자세히보기</div> -->
<!--                                     </div> -->
<!--                                 </div> -->
<!--                                 <div class="status-badge end"> -->
<!--                                     24.03.20<br> -->
<!--                                     개강    -->
<!--                                 </div> -->
<!--                             </a> -->
<!--                         </div> -->

                    </div>
                    <!-- 교육생 수강 후기 -->
                    <div class="review-wrap">
                        <h2 class="cont-tit">교육생 수강 후기</h2>
                        <div class="review-slide">
                        	<th:block th:each="item:${plist}">
	                        	<div class="item">
	                                <div class="item-inner">
	                                    <div class="txt-cont">
	                                        <p class="txt" th:text="${item.pcontent}"></p>
	                                    </div>
	                                    <div class="review-info">
	                                        <strong class="date">[[${item.pregdate}]] 수료</strong>
<!-- 	                                        <p class="by">‘[[${item.ptitle}]]’ 수료생</p> -->
	                                        <p class="by">‘[[${item.coursevo != null ? item.coursevo.cname : item.ptitle}]]’ 수료생</p>
	                                    </div>
	                                </div>
	                            </div>
                            </th:block>
<!--                             <div class="item"> -->
<!--                                 <div class="item-inner"> -->
<!--                                     <div class="txt-cont"> -->
<!--                                         <p class="txt"> -->
<!--                                             막연하게 시작하였지만 훌륭하고 좋은 강사님분들을 만나 강의를 받게 되었고 강의를 받으면서 구체적인 목표를 수립할 수 있게 되었습니다. 딱히 휴일 없이 6개월 짧지 않은 시간 힘이 안 들지는 않았지만 또래 친구들과 재미있게 할 수 있었습니다. 훈련 과정은 매우 유익했고 항상 잘 챙겨주시는 강사님들이 계셨습니다. 프로젝트를 하면서 많은 걸 배웠고 끝까지 같이 수강한 친구들과는 모두 다 잘 되고 인연이 계속 이어나갔으면 좋겠습니다. -->
<!--                                         </p> -->
<!--                                     </div> -->
<!--                                     <div class="review-info"> -->
<!--                                         <strong class="date">2022. 8.26 수료</strong> -->
<!--                                         <p class="by">‘빅데이터 분석을 활용한 인공지능 기반 디지털트랜스포메이션’과정 수료생</p> -->
<!--                                     </div> -->
<!--                                 </div> -->
<!--                             </div> -->

                        </div>
                        <div class="review-slide-paging slick-paging">
                            <button class="btn-prev">
                                <span class="blind">이전 후기</span>
                            </button>
                            <span class="pages">
                                <strong class="num curr"></strong>/<span class="num total"></span>
                            </span>
                            <button class="btn-next">
                                <span class="blind">다음 후기</span>
                            </button>
                        </div>
                    </div>
                    <!-- 협약기업 -->
                    <div class="partner-company">
                        <h2 class="cont-tit">협약기업</h2>    
                        <div class="partner-list">
                            <div class="item">
                                <img src="https://static.hankyung.com/resource/common/img/logo/logo-hk.svg" alt="한국경제">
                            </div>
                            <div class="item">
                                <img src="https://static.hankyung.com/resource/common/img/logo/logo-hktv.svg" alt="한국경제TV">
                            </div>    
                        </div>
                        <div class="marquee partner-list1">
                            <img src="https://static.hankyung.com/resource/itcampus/img/partner-list-1.png" class="partner-img" alt="협약기업">    
                        </div>
                        <div class="marquee partner-list2">
                            <img src="https://static.hankyung.com/resource/itcampus/img/partner-list-2.png" class="partner-img" alt="협약기업">    
                        </div>
                    </div>
                    <div th:replace="fragments/homepage_contact :: homepage_contact"></div>

                </main>
                <div th:replace="fragments/homepage_footer :: homepage_footer"></div>

            </div>
             <div th:replace="fragments/aside.html :: course-banner"></div>
        </div>
    </div>

    <!-- js: plugins -->
    <script src="https://hkstatic.hankyung.com/resource/common/library/jquery/v3.7.1/jquery-3.7.1.min.js"></script>
    <script src="https://hkstatic.hankyung.com/resource/common/library/slick/v1.6.0/slick.min.js"></script>
    <script src="https://hkstatic.hankyung.com/resource/common/library/jquery-plugin/jquery.marquee/v1.6.0/jquery.marquee.min.js"></script>

    <!-- js: UI -->
    <script>
        $(function () {
            // 메인 TOP 슬라이드
            const _$mainSlide = $('.main-slide');
            const _$mainSlidePage = $('.main-slide-paging');
            _$mainSlide.on('init reInit afterChange', function (event, slick, currentSlide, nextSlide) {
                let i = (currentSlide ? currentSlide : 0) + 1;
                _$mainSlidePage.find('.curr').text('0' + i);
                _$mainSlidePage.find('.total').text('0' + slick.slideCount);
            });
             _$mainSlide.slick({
                arrows: false,
                infinite: true,
                autoplay: true,
                autoplaySpeed: 3000,
                pauseOnHover : false
            });
            function bar(){
                $(".main-slide-paging .progress").css('width','0');
                $(".main-slide-paging .progress").animate({
                    'width': '100%'
                },3000);
            }
            bar();
            _$mainSlide.on('afterChange',function(){
                var curIdx = $(".slick-active").attr("data-slick-index");
                curIdx = parseInt(curIdx);
                bar();
            });

            // 교육생 후기 슬라이드
            const _$reviewSlide = $('.review-slide');
            const _$reviewSlidePage = $('.review-slide-paging');
            _$reviewSlide.on('init reInit afterChange', function (event, slick, currentSlide, nextSlide) {
                let i = (currentSlide ? currentSlide : 0) + 1;
                _$reviewSlidePage.find('.curr').text(i);
                _$reviewSlidePage.find('.total').text(slick.slideCount);
            });
             _$reviewSlide.slick({
                arrows: true,
                infinite: true,
                variableWidth: true,
                cssEase: 'linear',
                prevArrow: '.slick-paging .btn-prev',
                nextArrow: '.slick-paging .btn-next'
            });

            // 협약기업
            function partnerMarquee() {
                let marquee = $('.marquee');
                marquee.marquee({
                    duration: 40000,
                    delayBeforeStart: 0,
                    direction: 'left',
                    gap: 10,
                    duplicated: true,
                    startVisible: true,
                    pauseOnHover: true
                });
            }
            partnerMarquee();

            // PC 사이드 교육과정 배너
            $('.course-banner-slide').slick({
                fade: true,
                infinite: true,
                autoplay: true,
                autoplaySpeed: 4000,
                arrows: false,
                dots: true
            });
            
            
            //모집 중, 개강완료 구별
            $(".status-badge").each(function(){
            	var csdate=$(this).children("span").text();
            	
            	var startDate=new Date(csdate);
            	var currentDate=new Date();
            	
            	var differenceInDays = getDaysDifference(startDate,currentDate);
            	$(this).attr("class",(differenceInDays>0? "status-badge end":"status-badge ing"));
            });
            
        });
        //개강 날짜 , 현재 날짜 비교
        function getDaysDifference(startDate, endDate) {
            // 날짜를 밀리초 단위로 변환
            var startMillis = startDate.getTime();
            var endMillis = endDate.getTime();

            // 1일은 24시간 * 60분 * 60초 * 1000밀리초입니다.
            var oneDayMillis = 24 * 60 * 60 * 1000;

            // 두 날짜 사이의 밀리초 차이를 일 단위로 변환하여 반환
            var differenceInDays = Math.round((endMillis - startMillis) / oneDayMillis);
            return differenceInDays;
        }
    </script>
</body>
</html>